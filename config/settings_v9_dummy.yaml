# config/settings_v9_dummy.yaml
# 더미 데이터 전용 (매우 완화된 게이트)

data:
  path_primary: "data/partitioned"
  path_fallback: "data/processed/BTCUSDT_15m.parquet"
  symbol: "BTCUSDT"
  tf: "15m"
  start: null
  end: null

indicators:
  ema: [21, 55]
  rsi: 14
  atr: 14
  adx: 14
  ema_slope_norm: 0.05
  ema_bias_norm: 0.010

gates:
  require_mtf: false
  use_adx_gate: true
  adx_min: 10            # ✅ 20 → 10 (더미 데이터 ADX 낮음)
  
  use_trend_gate: true
  ema_slope_min: 0.01      # ✅ 0.03 → 0.01 (랜덤워크 기울기 작음)
  ema_slope_min_chop: 0.02 # ✅ 0.06 → 0.02
  
  use_range_gate: false    # ✅ 비활성화 (더미 데이터 range 일정)
  min_range_atr: 0.40
  range_on_bars: 3
  
  cooloff_bars: 1
  align_price_ema: false   # ✅ 비활성화 (랜덤워크는 EMA 교차 빈번)
  use_dev_guard: false     # ✅ 비활성화 (더미 데이터 괴리 작음)
  max_dev_atr: 0.80

  use_vol_filter: true      # ✅ 신규
  max_atr_p: 2.5            # ✅ atr_p > 2.5% 금지
  
scoring:
  weights:
    trend: 0.35            # ✅ 0.25 → 0.35 (slope 강조)
    momentum: 0.35         # ✅ 0.25 → 0.35 (RSI 강조)
    volatility: 0.20       # ✅ 0.15 → 0.20
    participation: 0.05    # ✅ 0.20 → 0.05 (더미 volume 의미 없음)
    location: 0.05         # ✅ 0.15 → 0.05 (더미 range 의미 없음)
  
  vol_mode: "q90"
  bias_trend_cand: 0.01    # ✅ 0.02 → 0.01 (cand 완화)
  bias_trend_enter: 0.02   # ✅ 0.04 → 0.02 (enter 완화)

thresholds:
  cand_score_min: 0.01
  enter_score_min: 0.03

risk:
  R: 0.005
  max_leverage: 7
  lev_map:
    - { min: 0.60, max: 0.65, lev: 2 }
    - { min: 0.65, max: 0.75, lev: 4 }
    - { min: 0.75, max: 0.80, lev: 6 }
    - { min: 0.80, max: 1.00, lev: 7 }
  atr_tp: [1.5, 1.8, 2.2]
  atr_sl: 1.0
  trail_k: 0.5
  max_hold_min: 120        # ✅ 75 → 120 (timeout 완화)
  enable_mdd_breaker: true   # ✅ 신규
  mdd_breaker: 0.05          # ✅ 5% MDD에서 모든 거래 중단

output:
  trades_csv: "logs/trades_dummy.csv"
  dbg_json: "logs/last_debug_dummy.json"

debug:
  auto_thresholds:
    cand_pct: 0.70         # ✅ 0.76 → 0.70 (상위 30%)
    enter_pct: 0.80        # ✅ 0.88 → 0.80 (상위 20%)
  no_gate: false
  force_cand_from_score: false
  force_pct: 0.75
  log_breakdown: true

session:
  tz_offset_hours: 0

validation:
  cpcv_splits: 5
  cpcv_test_groups: 2
  embargo_pct: 0.01
  bootstrap_samples: 1000